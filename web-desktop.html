<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web Windows 12 Simulator</title>
<style>
/* --- Desktop & Icons --- */
body, html { margin:0; padding:0; height:100%; font-family:sans-serif; background:#1e1e1e; color:white; overflow:hidden; }
#desktop { position:absolute; top:0; bottom:40px; left:0; right:0; padding:20px; }
.icon { display:inline-block; width:80px; text-align:center; margin:10px; cursor:pointer; user-select:none; }

/* --- Taskbar --- */
#taskbar { position:fixed; bottom:0; left:0; right:0; height:40px; background:#333; display:flex; align-items:center; padding:0 10px; }
#start-button { cursor:pointer; user-select:none; margin-right:10px; }
#running-windows { display:flex; gap:5px; }

/* --- Windows --- */
.window { position:absolute; width:300px; height:200px; background:white; color:black; border:1px solid #888; box-shadow:4px 4px 10px rgba(0,0,0,0.4); display:flex; flex-direction:column; resize:both; overflow:hidden; }
.window-header { background:#0078d7; color:white; padding:5px; cursor:move; user-select:none; display:flex; justify-content:space-between; align-items:center; }
.window-content { flex:1; padding:10px; background:#f3f3f3; overflow:auto; }
.close-button { cursor:pointer; }

/* --- Start Menu --- */
#start-menu { position:fixed; bottom:40px; left:10px; width:200px; background:#222; display:none; flex-direction:column; border:1px solid #444; }
.start-app { padding:10px; cursor:pointer; }
.start-app:hover { background:#555; }

/* --- Chat Log --- */
#chat-log { height:120px; overflow:auto; border:1px solid #ccc; padding:5px; background:white; color:black; }
</style>
</head>
<body>

<div id="desktop">
  <div class="icon" data-app="notepad">üìù Notepad</div>
  <div class="icon" data-app="calculator">üßÆ Calculator</div>
  <div class="icon" data-app="chatbot">ü§ñ AI Chat</div>
  <div class="icon" data-app="clock">‚è∞ Clock</div>
</div>

<div id="taskbar">
  <div id="start-button">Start</div>
  <div id="running-windows"></div>
</div>

<div id="start-menu">
  <div class="start-app" data-app="notepad">üìù Notepad</div>
  <div class="start-app" data-app="calculator">üßÆ Calculator</div>
  <div class="start-app" data-app="chatbot">ü§ñ AI Chat</div>
  <div class="start-app" data-app="clock">‚è∞ Clock</div>
</div>

<div id="windows-container"></div>

<script>
// --- Draggable Utility ---
function makeDraggable(win, header){
  let dragging=false, offsetX=0, offsetY=0;
  header.addEventListener('mousedown', e=>{
    dragging=true;
    offsetX=e.clientX - win.getBoundingClientRect().left;
    offsetY=e.clientY - win.getBoundingClientRect().top;
  });
  window.addEventListener('mousemove', e=>{
    if(dragging){
      win.style.left=(e.clientX-offsetX)+'px';
      win.style.top=(e.clientY-offsetY)+'px';
    }
  });
  window.addEventListener('mouseup', ()=>dragging=false);
}

// --- Open Window ---
function openWindow(title, contentGenerator){
  const win=document.createElement('div');
  win.classList.add('window');
  win.style.top='100px'; win.style.left='100px';
  const header=document.createElement('div');
  header.classList.add('window-header');
  header.innerHTML=`<span>${title}</span> <span class="close-button">‚úñÔ∏è</span>`;
  win.appendChild(header);
  const body=document.createElement('div'); body.classList.add('window-content'); win.appendChild(body);
  contentGenerator(body);
  document.getElementById('windows-container').appendChild(win);
  header.querySelector('.close-button').addEventListener('click', ()=>win.remove());
  makeDraggable(win, header);
}

// --- Apps ---
const apps={
  notepad: body=>{
    const textarea=document.createElement('textarea');
    textarea.style.width='100%'; textarea.style.height='100%';
    body.appendChild(textarea);
  },
  calculator: body=>{
    body.innerHTML='Simple Calculator:<br>';
    const input=document.createElement('input'); body.appendChild(input);
    const button=document.createElement('button'); button.innerText='='; body.appendChild(button);
    const result=document.createElement('div'); body.appendChild(result);
    button.addEventListener('click', ()=>{
      try{ result.textContent=eval(input.value); } catch { result.textContent='Error'; }
    });
  },
  chatbot: body=>{
    body.innerHTML='<div id="chat-log"></div>';
    const chatLog=body.querySelector('#chat-log');
    const input=document.createElement('input'); input.style.width='80%'; body.appendChild(input);
    const send=document.createElement('button'); send.innerText='Send'; body.appendChild(send);
    function botReply(msg){
      let reply="I don't understand.";
      if(msg.includes('hello')) reply="Hello! How are you?";
      if(msg.includes('time')) reply="Current time is "+new Date().toLocaleTimeString();
      if(msg.includes('date')) reply="Today's date is "+new Date().toLocaleDateString();
      return reply;
    }
    send.addEventListener('click', ()=>{
      const msg=input.value; if(!msg) return;
      chatLog.innerHTML+=`<div>You: ${msg}</div>`;
      chatLog.innerHTML+=`<div>AI: ${botReply(msg.toLowerCase())}</div>`;
      chatLog.scrollTop=chatLog.scrollHeight; input.value='';
    });
  },
  clock: body=>{
    const clockDiv=document.createElement('div'); clockDiv.style.fontSize='24px'; body.appendChild(clockDiv);
    function updateClock(){ clockDiv.textContent=new Date().toLocaleTimeString(); }
    setInterval(updateClock,1000); updateClock();
  }
};

// --- Icon & Start Menu Events ---
document.querySelectorAll('.icon').forEach(icon=>{
  icon.addEventListener('dblclick', ()=>openWindow(icon.textContent, apps[icon.dataset.app]));
});
const startButton=document.getElementById('start-button');
const startMenu=document.getElementById('start-menu');
startButton.addEventListener('click', ()=>{ startMenu.style.display = startMenu.style.display==='flex'?'none':'flex'; });
document.querySelectorAll('.start-app').forEach(item=>{
  item.addEventListener('click', ()=>{
    openWindow(item.textContent, apps[item.dataset.app]);
    startMenu.style.display='none';
  });
});
</script>

</body>
</html>
